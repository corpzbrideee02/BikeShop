import{r as e,o as t,c as a,a as s,b as r,t as l,w as o,F as i,d as n,e as d,f as c,g as u,u as m,h as p,v as g,i as h,j as v,k as y,l as w,P as f,s as b,m as C,n as k,p as S,q as E,x,y as T,z as I,A as L,B}from"./vendor.8fa35a14.js";const P={setup(){const t=e([{label:"Home",icon:"pi pi-home",to:"/"},{label:"Login",icon:"pi pi-user-edit",to:"/login"},{label:"Register",icon:"pi pi-user-plus",to:"/register"},{label:"Brands",icon:"pi pi-sort-amount-down",to:"/brands"},{label:"Orders",icon:"pi pi-list",to:"/orders"},{label:"Branches",icon:"pi pi-sitemap",to:"/branch"},{label:"Logout",icon:"pi pi-power-off",to:"/logout"}]),a=e();return{menuitems:t,menu:a,toggle:e=>{a.value.toggle(e)}}}},D=r(" best viewed on mobile device — "),$=s("a",{href:"https://corpzbrideee02.github.io/",target:"_blank",rel:"noopener noreferrer"},"Dianne Corpuz",-1),V=s("span",{style:{"font-family":"'Aclonica', sans-serif"}},"D.Bike Store",-1);P.render=function(e,d,c,u,m,p){const g=n("Menu"),h=n("Button"),v=n("Toolbar"),y=n("router-view");return t(),a(i,null,[s("div",null,[s("footer",null,[D,$,r(" ©"+l((new Date).getFullYear()),1)]),s(v,null,{left:o((()=>[V])),right:o((()=>[s(g,{id:"overlay_menu",ref:"menu",model:u.menuitems,popup:!0},null,8,["model"]),s(h,{icon:"pi pi-bars",onClick:u.toggle},null,8,["onClick"])])),_:1})]),s(y)],64)};var N="/assets/bike.ff55c318.png";const O={},U=s("img",{src:N,height:"100",id:"homeLogoImg"},null,-1),q=s("div",{class:"heading"},"HOME",-1),M=s("div",null,[s("img",{src:"/assets/movingBike.06e56efd.gif",id:"homeBikeImage"})],-1),_=s("div",{class:"heading"},"Welcome to D.Bike",-1),H=s("br",null,null,-1),R=s("div",{class:"heading2"},"Bikes for every rider.",-1),j=s("div",{class:"heading2"}," Find the perfect ride for all of your outdoor adventures! ",-1),A=s("div",{id:"homeBrands"},[s("a",{href:"https://www.canadiantire.ca/en/all-brands/supercycle/bikes.html",target:"_blank"},[s("img",{src:"/assets/supercycleLogo_final.42ed3864.png",class:"brandsImg"})]),s("a",{href:"https://www.trekbikes.com/ca/en_CA/",target:"_blank"},[s("img",{src:"/assets/trekLogo_final.c264af7f.png",class:"brandsImg"})]),s("a",{href:"https://www.giant-bicycles.com/ca",target:"_blank"},[s("img",{src:"/assets/giantLogo_final.5a97de9d.png",class:"brandsImg"})])],-1);O.render=function(e,s){return t(),a("div",null,[U,q,M,_,H,R,j,A])};const G=async(e,t)=>{let a,s=F();try{let r=await fetch(`/api/${e}`,{method:"POST",headers:s,body:JSON.stringify(t)});a=await r.json()}catch(r){a=r}return a},J=async e=>{let t,a=F();try{let s=await fetch(`/api/${e}`,{method:"GET",headers:a});t=await s.json()}catch(s){console.log(s),t={error:`Error has occured: ${s.message}`}}return t},F=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e},z={setup(){const e=m();d((()=>{a()}));let t=c({status:"",brands:[],products:[],selectedBrand:{},selectedItem:{},dialogStatus:"",itemSelected:!1,qty:0,cart:[]});const a=async()=>{try{t.status="finding brands ...";const e=await J("Brand");void 0===e.error?(t.brands=e,t.status=`loaded ${t.brands.length} brands`):t.status=e.error}catch(e){console.log(e),t.status=`Error has occured: ${e.message}`}};return{state:t,loadProduct:async()=>{try{t.status=`finding product for brand ${t.selectedBrand}...`;let e=await J(`Product/${t.selectedBrand}`);t.products=e,t.status=`loaded ${t.products.length} products`}catch(e){console.log(e),t.status=`Error has occured: ${e.message}`}sessionStorage.getItem("cart")&&(t.cart=JSON.parse(sessionStorage.getItem("cart")))},onRowSelect:e=>{try{t.selectedItem=e.data,t.dialogStatus="",t.itemSelected=!0}catch(a){console.log(a),t.status=`Error has occured: ${a.message}`}},formatCurrency:e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),addToCart:()=>{const e=t.cart.findIndex((e=>e.id===t.selectedItem.id));0!==t.qty?(-1===e?t.cart.push({id:t.selectedItem.id,qty:t.qty,item:t.selectedItem}):t.cart[e]={id:t.selectedItem.id,qty:t.qty,item:t.selectedItem},t.dialogStatus=`${t.qty} item(s) added`):(-1!==e&&t.cart.splice(e,1),t.dialogStatus="item(s) removed"),sessionStorage.setItem("cart",JSON.stringify(t.cart)),t.qty=0},viewCart:()=>{e.push("cart")}}}},Z={class:"container"},W=s("img",{src:N,height:"100"},null,-1),Y=s("div",{class:"heading"},"Brands",-1),K={key:1},Q={style:{"text-align":"center"}},X={style:{margin:"2vh","font-size":"larger","font-weight":"bold",color:"rgb(34, 72, 75)"}},ee={style:{"margin-top":"3vh","text-align":"center"}},te={style:{"margin-top":"2vh","text-align":"center","margin-left":"-5vw"}},ae=s("span",{style:{"margin-right":"2vw"}},"Qty:",-1),se={style:{"text-align":"center","margin-top":"2vh"}},re=r("   "),le={key:0,style:{"text-align":"center"},class:"dialog-status"};z.render=function(e,r,i,d,c,m){const p=n("Dropdown"),g=n("Column"),h=n("DataTable"),v=n("InputNumber"),y=n("Button"),w=n("Dialog");return t(),a("div",Z,[W,Y,d.state.brands.length>0?(t(),a(p,{key:0,modelValue:d.state.selectedBrand,"onUpdate:modelValue":r[1]||(r[1]=e=>d.state.selectedBrand=e),style:{"text-align":"left"},options:d.state.brands,optionLabel:"name",optionValue:"id",placeholder:"Select Brand",onChange:d.loadProduct},null,8,["modelValue","options","onChange"])):u("",!0),d.state.products.length>0?(t(),a("div",K,[s(h,{value:d.state.products,scrollable:!0,scrollHeight:"55vh",selectionMode:"single",class:"p-datatable-striped",onRowSelect:d.onRowSelect},{default:o((()=>[s(g,{style:{"margin-right":"-35vw"}},{body:o((e=>[s("img",{src:`/img/${e.data.graphicName}`,alt:e.data.productName,class:"product-image"},null,8,["src","alt"])])),_:1}),s(g,{field:"productName",header:"Bike Name",headerStyle:"font-family: 'Aclonica', sans-serif;"})])),_:1},8,["value","onRowSelect"]),s(w,{visible:d.state.itemSelected,"onUpdate:visible":r[3]||(r[3]=e=>d.state.itemSelected=e),class:"dialog-border"},{default:o((()=>[s("div",Q,[s("img",{src:`/img/${d.state.selectedItem.graphicName}`,class:"selected-product-img"},null,8,["src"]),s("div",X,l(d.state.selectedItem.productName)+" - "+l(d.formatCurrency(d.state.selectedItem.msrp)),1)]),s("div",ee,l(d.state.selectedItem.description),1),s("div",te,[ae,s("span",null,[s(v,{id:"qty",min:0,modelValue:d.state.qty,"onUpdate:modelValue":r[2]||(r[2]=e=>d.state.qty=e),step:1,incrementButtonClass:"incDec",decrementButtonClass:"incDec",showButtons:"",buttonLayout:"horizontal",decrementButtonIcon:"pi pi-minus",incrementButtonIcon:"pi pi-plus"},null,8,["modelValue"])])]),s("div",se,[s(y,{label:"Add To Cart",onClick:d.addToCart,class:"p-button-outlined margin-button1",style:{color:"rgb(34, 72, 75)"}},null,8,["onClick"]),re,d.state.cart.length>0?(t(),a(y,{key:0,label:"View Cart",class:"p-button-outlined margin-button1",onClick:d.viewCart,style:{color:"rgb(34, 72, 75)"}},null,8,["onClick"])):u("",!0)]),""!==d.state.dialogStatus?(t(),a("div",le,l(d.state.dialogStatus),1)):u("",!0)])),_:1},8,["visible"])])):u("",!0)])};const oe={setup(){m(),d((()=>{sessionStorage.getItem("cart")?(e.cart=JSON.parse(sessionStorage.getItem("cart")),e.cart.map((t=>{e.subTot+=t.item.costPrice*t.qty}))):e.cart=[]}));let e=c({status:"",subTot:0,calTot:0,cart:[]});const t=()=>{sessionStorage.removeItem("cart"),e.cart=[],e.status="cart emptied"};return{state:e,emptyCart:t,formatCurrency:e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),getTax:t=>(.13*e.subTot).toLocaleString("en-US",{style:"currency",currency:"USD"}),finalTotal:e=>e+.13*e,addCart:async()=>{let a=JSON.parse(sessionStorage.getItem("customer")),s=JSON.parse(sessionStorage.getItem("cart"));try{e.status="sending cart info to server";let r={email:a.email,selections:s},l=await G("order",r);l.indexOf("not")>0||t(),e.status=l}catch(r){console.log(r),e.status=`Error add cart: ${r}`}}}}},ie={class:"container"},ne=s("img",{style:{"margin-top":"2vh"},src:"/assets/cart.0846b622.png",height:"100"},null,-1),de=s("div",{class:"heading"},"Cart Contents",-1),ce={class:"status"},ue={key:0,id:"cart"},me={key:1},pe={style:{"margin-top":"1vh"}},ge=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Sub Total: ",-1),he={style:{"text-align":"right",padding:"0 3vw"}},ve=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Tax: ",-1),ye={style:{"text-align":"right",padding:"0 3vw"}},we=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Total: ",-1),fe={style:{"text-align":"right",padding:"0 3vw"}};oe.render=function(e,i,d,c,m,p){const g=n("Column"),h=n("DataTable"),v=n("Button");return t(),a("div",ie,[ne,de,s("div",ce,l(c.state.status),1),c.state.cart.length>0?(t(),a("div",ue,[s(h,{value:c.state.cart,scrollable:!0,scrollHeight:"38vh",dataKey:"id",class:"p-datatable-striped",id:"cart-contents"},{default:o((()=>[s(g,{header:"Name",field:"item.productName"}),s(g,{header:"Qty",field:"qty"}),s(g,{header:"Price",field:"item.msrp"},{body:o((e=>[r(l(c.formatCurrency(e.data.item.msrp)),1)])),_:1}),s(g,{header:"Extended",field:"item.costPrice"},{body:o((e=>[r(l(c.formatCurrency(e.data.item.costPrice)),1)])),_:1})])),_:1},8,["value"])])):u("",!0),c.state.cart.length>0?(t(),a("div",me,[s("table",pe,[s("tr",null,[ge,s("td",he,l(c.formatCurrency(c.state.subTot)),1)]),s("tr",null,[ve,s("td",ye,l(c.getTax(c.state.subTot)),1)]),s("tr",null,[we,s("td",fe,l(c.formatCurrency(c.finalTotal(c.state.subTot))),1)])]),s(v,{style:{margin:"2vh",color:"var(--teal-900)"},label:"Add Cart",onClick:c.addCart,class:"p-button-outlined margin-button1"},null,8,["onClick"]),s(v,{style:{margin:"2vh",color:"var(--teal-900)"},label:"Empty Cart",onClick:c.emptyCart,class:"p-button-outlined margin-button1"},null,8,["onClick"])])):u("",!0)])};const be={setup(){let e=c({status:"",validationErrors:{},firstname:"",lastname:"",email:"",password:"",visibility:"password"});return{state:e,validateForm:async()=>{if(e.firstname.trim()?delete e.validationErrors.firstname:e.validationErrors.firstname=!0,e.lastname.trim()?delete e.validationErrors.lastname:e.validationErrors.lastname=!0,e.email.trim()?delete e.validationErrors.email:e.validationErrors.email=!0,e.password.trim()?delete e.validationErrors.password:e.validationErrors.password=!0,0===Object.keys(e.validationErrors).length){e.status="registering with server";let a={firstname:e.firstname,lastname:e.lastname,email:e.email,password:e.password};try{let t=await G("register",a);e.status=t.token}catch(t){e.status=t.message}}},showPassword:()=>{e.visibility="text"},hidePassword:()=>{e.visibility="password"}}}},Ce={class:"container"},ke={class:"registerContainer"},Se=s("div",{class:"heading"},[s("img",{src:N,height:"60",style:{"vertical-align":"middle"}}),r("Register")],-1),Ee={class:"p-fluid"},xe={class:"p-field"},Te={class:"p-float-label"},Ie=s("label",{for:"firstname"},"First Name",-1),Le={class:"p-error"},Be={class:"p-field"},Pe={class:"p-float-label"},De=s("label",{for:"lastname"},"Lastname",-1),$e={class:"p-error"},Ve={class:"p-field"},Ne={class:"p-float-label"},Oe=s("label",{for:"email"},"Email",-1),Ue={class:"p-error"},qe={class:"p-field"},Me={class:"p-float-label"},_e={class:"p-input-icon-right"},He=s("label",{for:"password"},"Password",-1),Re={class:"p-error"},je={class:"status"};be.render=function(e,r,o,i,d,c){const m=n("InputText"),h=n("Button");return t(),a("div",Ce,[s("div",ke,[Se,s("div",Ee,[s("div",xe,[s("span",Te,[s(m,{id:"firstname",modelValue:i.state.firstname,"onUpdate:modelValue":r[1]||(r[1]=e=>i.state.firstname=e),class:{"p-invalid":i.state.validationErrors.firstname}},null,8,["modelValue","class"]),Ie]),p(s("small",Le,"Firstname is required.",512),[[g,i.state.validationErrors.firstname]])]),s("div",Be,[s("span",Pe,[s(m,{id:"lastname",modelValue:i.state.lastname,"onUpdate:modelValue":r[2]||(r[2]=e=>i.state.lastname=e),class:{"p-invalid":i.state.validationErrors.lastname}},null,8,["modelValue","class"]),De]),p(s("small",$e,"Lastname is required.",512),[[g,i.state.validationErrors.lastname]])]),s("div",Ve,[s("span",Ne,[s(m,{id:"email",type:"text",modelValue:i.state.email,"onUpdate:modelValue":r[3]||(r[3]=e=>i.state.email=e),class:{"p-invalid":i.state.validationErrors.email}},null,8,["modelValue","class"]),Oe]),p(s("small",Ue,"valid format is required.",512),[[g,i.state.validationErrors.email]])]),s("div",qe,[s("span",Me,[s(m,{id:"password",type:i.state.visibility,modelValue:i.state.password,"onUpdate:modelValue":r[4]||(r[4]=e=>i.state.password=e),class:{"p-invalid":i.state.validationErrors.password}},null,8,["type","modelValue","class"]),s("span",_e,["password"===i.state.visibility?(t(),a("i",{key:0,class:"pi pi-eye",onClick:r[5]||(r[5]=(...e)=>i.showPassword&&i.showPassword(...e))})):u("",!0),"text"===i.state.visibility?(t(),a("i",{key:1,class:"pi pi-eye-slash",onClick:r[6]||(r[6]=(...e)=>i.hidePassword&&i.hidePassword(...e))})):u("",!0)]),He]),p(s("small",Re,"Password is required.",512),[[g,i.state.validationErrors.password]])]),s(h,{label:"Register",onClick:i.validateForm,class:"p-button-outlined",style:{margin:"2vh",width:"25vw",color:"var(--teal-900)"}},null,8,["onClick"])])]),s("div",je,l(i.state.status),1)])};const Ae={setup(){const e=m(),t=h();let a=c({email:"",password:"",status:"",visibility:"password",validationErrors:[]});return{login:async()=>{await sessionStorage.removeItem("customer");try{if(a.email.trim()?delete a.validationErrors.email:a.validationErrors.email=!0,a.password.trim()?delete a.validationErrors.password:a.validationErrors.password=!0,0===Object.keys(a.validationErrors).length){a.status="logging into server";let s={firstname:"",lastname:"",email:a.email,password:a.password},r=await G("login",s);r.token.indexOf("failed")>0?a.status=r.token:(await sessionStorage.setItem("customer",JSON.stringify(r)),t.params.nextUrl?e.push({name:t.params.nextUrl}):e.push({name:"Home"}))}}catch(s){console.log(`error ${s}`),a.status=`Error has occured: ${s}`}},state:a,showPassword:()=>{a.visibility="text"},hidePassword:()=>{a.visibility="password"}}}},Ge={class:"container"},Je={class:"loginPageContainer"},Fe=s("div",{class:"heading"},[s("img",{src:N,height:"60",style:{"vertical-align":"middle"}}),r("Login")],-1),ze={class:"p-fluid"},Ze={class:"p-field"},We={class:"p-float-label"},Ye=s("label",{for:"email"},"Email",-1),Ke={class:"p-error"},Qe={class:"p-field"},Xe={class:"p-float-label"},et={class:"p-input-icon-right"},tt=s("label",{for:"password"},"Password",-1),at={class:"p-error"},st={class:"status"};Ae.render=function(e,r,o,i,d,c){const m=n("InputText"),h=n("Button");return t(),a("div",Ge,[s("div",Je,[Fe,s("div",ze,[s("div",Ze,[s("span",We,[s(m,{id:"email",type:"text",modelValue:i.state.email,"onUpdate:modelValue":r[1]||(r[1]=e=>i.state.email=e),class:{"p-invalid":i.state.validationErrors.email}},null,8,["modelValue","class"]),Ye]),p(s("small",Ke,"valid format is required.",512),[[g,i.state.validationErrors.email]])]),s("div",Qe,[s("span",Xe,[s(m,{id:"password",type:i.state.visibility,modelValue:i.state.password,"onUpdate:modelValue":r[2]||(r[2]=e=>i.state.password=e),class:{"p-invalid":i.state.validationErrors.password}},null,8,["type","modelValue","class"]),s("span",et,["password"===i.state.visibility?(t(),a("i",{key:0,class:"pi pi-eye",onClick:r[3]||(r[3]=(...e)=>i.showPassword&&i.showPassword(...e))})):u("",!0),"text"===i.state.visibility?(t(),a("i",{key:1,class:"pi pi-eye-slash",onClick:r[4]||(r[4]=(...e)=>i.hidePassword&&i.hidePassword(...e))})):u("",!0)]),tt]),p(s("small",at,"Password is required.",512),[[g,i.state.validationErrors.password]])]),s(h,{label:"Login",onClick:i.login,class:"p-button-outlined",style:{margin:"5vh",width:"25vw",color:"var(--teal-900)"}},null,8,["onClick"])])]),s("div",st,l(i.state.status),1)])};const rt={setup(){let t=e("You are Logged out.");d((()=>{a()}));const a=()=>{sessionStorage.clear()};return{status:t}}},lt={class:"container"},ot=s("img",{src:N,height:"100"},null,-1),it=s("div",{class:"heading"},"Logout",-1),nt={class:"status"};rt.render=function(e,r,o,i,n,d){return t(),a("div",lt,[ot,it,s("div",nt,l(i.status),1)])};const dt={setup(){let e=c({status:"",dialogStatus:"",orders:[],selectedOrder:!1,orderselected:{},orderDetails:[]});d((()=>{t()}));const t=async()=>{try{let t=JSON.parse(sessionStorage.getItem("customer"));const a=await J(`order/${t.email}`);void 0===a.error?(e.orders=a,e.status=`loaded ${e.orders.length} orders`,e.selectedOrder=!1):e.status=a.error}catch(t){console.log(t),e.status=`Error has occured: ${t.message}`}};return{state:e,formatDate:e=>{let t;t=void 0===e?new Date:new Date(Date.parse(e));let a=t.getDate(),s=t.getMonth()+1,r=t.getFullYear(),l=t.getHours(),o=t.getMinutes();return o<10&&(o="0"+o),r+"-"+s+"-"+a+" "+l+":"+o},onRowSelect:async t=>{try{let a=JSON.parse(sessionStorage.getItem("customer"));e.orderselected=t.data;const s=await J(`order/${e.orderselected.id}/${a.email}`);e.orderDetails=s,e.dialogStatus=`details for tray ${e.orderselected.id}`,e.selectedOrder=!0}catch(a){console.log(a),e.status=`Error has occured: ${a.message}`}},formatCurrency:e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),getTax:t=>(.13*e.orderselected.orderAmount).toLocaleString("en-US",{style:"currency",currency:"USD"}),finalTotal:e=>e+.13*e}}},ct={class:"container"},ut=s("img",{style:{"margin-top":"2vh"},src:"/assets/orderLogo.ad1d6b56.jpg",height:"100"},null,-1),mt=s("div",{class:"heading"},"Your Orders",-1),pt={class:"status"},gt={class:"orderNum"},ht={class:"orderDate"},vt=s("div",{style:{"text-align":"center",margin:"3vh"}},[s("img",{height:"100",src:"/assets/orderLogo.ad1d6b56.jpg"})],-1),yt=s("div",{class:"order-head"},"Quantities",-1),wt={key:0},ft={style:{"margin-top":"1vh"}},bt=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Sub Total: ",-1),Ct={style:{"text-align":"right",padding:"0 3vw"}},kt=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Tax: ",-1),St={style:{"text-align":"right",padding:"0 3vw"}},Et=s("td",{style:{width:"100%","text-align":"right","font-weight":"bold"}}," Total: ",-1),xt={style:{"text-align":"right",padding:"0 3vw"}};dt.render=function(e,i,d,c,m,p){const g=n("Column"),h=n("DataTable"),v=n("Dialog");return t(),a("div",ct,[ut,mt,s("div",pt,l(c.state.status),1),s("div",null,[c.state.orders.length>0?(t(),a(h,{key:0,value:c.state.orders,scrollable:!0,scrollHeight:"60vh",dataKey:"id",class:"p-datatable-striped",selection:c.state.orderselected,"onUpdate:selection":i[1]||(i[1]=e=>c.state.orderselected=e),selectionMode:"single",onRowSelect:c.onRowSelect},{default:o((()=>[s(g,{header:"Order #",field:"id"}),s(g,{header:"Date"},{body:o((e=>[r(l(c.formatDate(e.data.orderDate)),1)])),_:1})])),_:1},8,["value","selection","onRowSelect"])):u("",!0),s(v,{visible:c.state.selectedOrder,"onUpdate:visible":i[2]||(i[2]=e=>c.state.selectedOrder=e),class:"dialog-border"},{default:o((()=>[s("div",gt,"Order#: "+l(c.state.orderDetails[0].orderId),1),s("div",ht,l(c.state.orderDetails[0].orderDate),1),vt,yt,s(h,{value:c.state.orderDetails,scrollable:!0,scrollHeight:"38vh",dataKey:"id",class:"p-datatable-striped",style:{"min-width":"20vw"}},{default:o((()=>[s(g,{header:"Name",field:"productName",style:{"min-width":"20vw"}}),s(g,{header:"S",field:"qtySold"}),s(g,{header:"O",field:"qtyOrdered"}),s(g,{header:"B",field:"qtyBackOrdered"}),s(g,{header:"Extended",field:"sellingPrice"},{body:o((e=>[r(l(c.formatCurrency(e.data.sellingPrice)),1)])),_:1})])),_:1},8,["value"]),c.state.orders.length>0?(t(),a("div",wt,[s("table",ft,[s("tr",null,[bt,s("td",Ct,l(c.formatCurrency(c.state.orderselected.orderAmount)),1)]),s("tr",null,[kt,s("td",St,l(c.formatCurrency(c.getTax(c.state.orderselected.orderAmount))),1)]),s("tr",null,[Et,s("td",xt,l(c.formatCurrency(c.finalTotal(c.state.orderselected.orderAmount))),1)])])])):u("",!0)])),_:1},8,["visible"])])])};const Tt={name:"Map",setup(){const t=e(null);let a=c({status:"",address:"",showmap:!1});return{mapRef:t,state:a,genMap:async()=>{try{a.showmap=!0;const e=window.tt;let s=`https://api.tomtom.com/search/2/geocode/${a.address}.json?key=HZTNMJGyvobd3HhGaZd14rGnpLPwv0mL`,r=await fetch(s),l=await r.json(),o=l.results[0].position.lat,i=l.results[0].position.lon,n=e.map({key:"HZTNMJGyvobd3HhGaZd14rGnpLPwv0mL",container:t.value,source:"vector/1/basic-main",center:[i,o],zoom:8});n.addControl(new e.FullscreenControl),n.addControl(new e.NavigationControl);let d=(new e.Marker).setLngLat([i,o]).addTo(n),c=25,u=new e.Popup({offset:c});u.setHTML(`<div id="popup">Some interesting info about ${a.address} goes here</div>`),d.setPopup(u)}catch(e){a.status=e.message}}}}},It=s("div",{class:"heading"},"TomTom Map Ex3",-1),Lt=s("div",{class:"status"},"show map with marker",-1),Bt=s("br",null,null,-1),Pt={style:{margin:"3vh"}},Dt={id:"map",ref:"mapRef"};Tt.render=function(e,r,l,o,i,d){const c=n("InputText"),u=n("Button");return t(),a("div",null,[It,Lt,s("div",null,[s(c,{placeholder:"enter current address",id:"address",modelValue:o.state.address,"onUpdate:modelValue":r[1]||(r[1]=e=>o.state.address=e)},null,8,["modelValue"]),Bt]),s("div",Pt,[s(u,{label:"Gen Map",onClick:o.genMap,class:"p-button-outlined",style:{width:"30vw"}},null,8,["onClick"])]),p(s("div",Dt,null,512),[[g,!0===o.state.showmap]])])};const $t={name:"Map",setup(){const t=e(null);let a=c({status:"",address:"",latlon:"",showmap:!1,showWarning:!1,showError:!1});return{mapRef:t,state:a,getLatLon:async()=>{a.showWarning=!1,a.showError=!1,0==a.address.length&&(a.showWarning=!0);try{const e=window.tt;let s=`https://api.tomtom.com/search/2/geocode/${a.address}.json?key=HZTNMJGyvobd3HhGaZd14rGnpLPwv0mL `,r=await fetch(s),l=await r.json(),o=l.results[0].position.lat,i=l.results[0].position.lon;a.latlon=`Address is at Lat ${o} and Lon ${i} `;let n=e.map({key:"HZTNMJGyvobd3HhGaZd14rGnpLPwv0mL",container:t.value,source:"vector/1/basic-main",center:[i,o],zoom:8});n.addControl(new e.FullscreenControl),n.addControl(new e.NavigationControl),(await J(`branch/${o}/${i}`)).map((t=>{let a=(new e.Marker).setLngLat([t.longitude,t.latitude]).addTo(n),s=new e.Popup({offset:25});s.setHTML(`<div id="popup">Branch#: ${t.id}</div><div>${t.street}, ${t.city}<br/>${t.distance.toFixed(2)} km <div>`),a.setPopup(s)})),a.showmap=!0}catch(e){a.status=e.message,a.address.length>0&&(a.showError=!0)}}}}},Vt=s("img",{src:N,height:"100"},null,-1),Nt=s("div",{class:"heading"},"3 Closest Branches",-1),Ot=s("br",null,null,-1),Ut=r("Warning: Please Enter Address"),qt=r("Error: Invalid Address"),Mt={id:"map",ref:"mapRef"},_t=s("div",{class:"clear"},null,-1);$t.render=function(e,r,l,i,d,c){const m=n("InputText"),h=n("Button"),v=n("Message");return t(),a("div",null,[Vt,Nt,s("div",null,[s(m,{placeholder:"enter address",id:"address",modelValue:i.state.address,"onUpdate:modelValue":r[1]||(r[1]=e=>i.state.address=e),style:{width:"40vw","margin-right":"2vw",padding:"10px"}},null,8,["modelValue"]),s(h,{onClick:i.getLatLon,class:"pi pi-search",style:{width:"10vw",color:"var(--teal-900)","background-color":"white",border:"1px var(--teal-900) solid"}},null,8,["onClick"])]),Ot,1==i.state.showWarning?(t(),a(v,{key:0,severity:"warn",life:3e3,sticky:!1},{default:o((()=>[Ut])),_:1})):u("",!0),1==i.state.showError?(t(),a(v,{key:1,severity:"error",life:3e3,sticky:!1},{default:o((()=>[qt])),_:1})):u("",!0),p(s("div",Mt,null,512),[[g,!0===i.state.showmap&&!1===i.state.showError&&!1===i.state.showWarning]]),_t])};const Ht=[{path:"/",name:"Home",component:O},{path:"/brands",name:"Brands",component:z},{path:"/cart",name:"cart",component:oe},{path:"/orders",name:"orders",component:dt},{path:"/register",name:"Register",component:be},{path:"/login",name:"login",component:Ae},{path:"/logout",name:"logout",component:rt},{path:"/map",name:"map",component:Tt},{path:"/branch",name:"branch",component:$t}],Rt=v({history:y(),routes:Ht});Rt.beforeEach(((e,t,a)=>{!["/login","/register","/logout"].includes(e.path)&&!sessionStorage.getItem("customer")?a({name:"login",params:{nextUrl:e.name}}):a()}));const jt=w(P);jt.use(f),jt.use(Rt),jt.component("Button",b),jt.component("Dropdown",C),jt.component("DataTable",k),jt.component("Column",S),jt.component("Dialog",E),jt.component("InputNumber",x),jt.component("InputText",T),jt.component("Toolbar",I),jt.component("Menu",L),jt.component("Message",B),jt.mount("#app");
